<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reserva de Marketing</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #00a884; /* Azul verdoso, color de marketing */
            --secondary-color: #ffffff;
            --background-color: #000000;
            --container-bg: rgba(20, 20, 20, 0.9);
            --border-color: #333;
        }

        body {
            background-color: var(--background-color);
            color: var(--secondary-color);
            font-family: 'Montserrat', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            flex-direction: column;
            overflow-x: hidden;
        }

        /* --- Animación de Fondo con Canvas para Marketing --- */
        #marketing-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            opacity: 0.15;
        }

        /* --- Contenedor Principal --- */
        .booking-container {
            position: relative;
            z-index: 1;
            background: var(--container-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 2em;
            box-shadow: 0 0 25px rgba(0, 168, 132, 0.4); /* Sombra azul verdosa */
            max-width: 900px;
            width: 90%;
            text-align: center;
            margin: 2em 0;
        }

        h2 {
            font-size: 2.5em;
            color: var(--secondary-color);
            margin-bottom: 0.5em;
            text-shadow: 0 0 10px var(--secondary-color); /* Resplandor blanco */
        }

        .subtitle {
            font-size: 1.2em;
            margin-bottom: 2em;
            color: #ccc;
        }

        /* --- Calendario y Horarios --- */
        .booking-section {
            display: flex;
            flex-direction: column;
            gap: 1.5em;
        }

        .calendar {
            background: #111;
            padding: 1em;
            border-radius: 8px;
            border: 1px solid #444;
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1em;
        }
        .calendar-header button {
            background: none;
            border: none;
            color: var(--secondary-color); /* Blanco */
            font-size: 1.5em;
            cursor: pointer;
            transition: color 0.3s;
            text-shadow: 0 0 5px var(--secondary-color); /* Resplandor blanco */
        }
        .calendar-header button:hover {
            color: #ddd;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        .day-label, .day-cell {
            padding: 0.5em;
            border-radius: 4px;
            color: #f0f0f0; /* Letras blancas */
        }
        .day-label {
            font-weight: bold;
            color: #aaa;
        }
        .day-cell {
            cursor: pointer;
            background: #222;
            transition: background-color 0.3s, transform 0.2s;
        }
        .day-cell.selected {
            background: var(--primary-color); /* Azul verdoso */
            color: var(--secondary-color); /* Blanco */
            font-weight: bold;
            transform: scale(1.05);
            box-shadow: 0 0 10px var(--secondary-color); /* Resplandor blanco */
        }
        .day-cell:hover {
            background: #444;
        }
        .day-cell.disabled {
            color: #666;
            cursor: not-allowed;
            background: #111;
        }
        .day-cell.disabled:hover {
            background: #111;
        }

        .time-slots {
            display: none;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 1em;
        }
        .time-slot {
            background: #222;
            color: var(--secondary-color); /* Blanco */
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            text-shadow: 0 0 5px var(--secondary-color); /* Resplandor blanco */
        }
        .time-slot:hover {
            background: #444;
        }
        .time-slot.selected {
            background: var(--primary-color); /* Azul verdoso */
            color: var(--secondary-color); /* Blanco */
            font-weight: bold;
            transform: scale(1.05);
            box-shadow: 0 0 10px var(--secondary-color); /* Resplandor blanco */
        }

        /* --- Formulario de Datos --- */
        #user-form {
            display: none;
            text-align: left;
            margin-top: 2em;
            animation: fadeIn 1s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 1.5em;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5em;
            color: var(--secondary-color); /* Blanco */
            font-weight: 600;
            text-shadow: 0 0 3px var(--secondary-color); /* Resplandor blanco sutil */
        }
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #444;
            background-color: #222;
            color: var(--secondary-color);
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 1em;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .form-group input:focus {
            outline: none;
            border-color: var(--primary-color); /* Azul verdoso al enfocar */
            box-shadow: 0 0 10px rgba(0, 168, 132, 0.5); /* Sombra azul verdosa al enfocar */
        }
        .form-buttons {
            display: flex;
            justify-content: space-between;
            gap: 1em;
            margin-top: 2em;
        }
        .form-buttons button, .form-buttons a {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            transition: background-color 0.3s, transform 0.2s;
            width: 100%;
            text-align: center;
            color: var(--secondary-color); /* Letras blancas */
            text-shadow: 0 0 3px var(--secondary-color);
        }
        .form-buttons button.submit, .form-buttons button.clear {
            background-color: var(--primary-color); /* Azul verdoso */
        }
        .form-buttons button.submit:hover, .form-buttons button.clear:hover {
            background-color: #008f6c; /* Tono más oscuro de azul verdoso al hacer hover */
            transform: scale(1.02);
        }
        .form-buttons a.back-home {
            background-color: #555;
            color: var(--secondary-color);
            text-shadow: 0 0 3px var(--secondary-color);
        }
        .form-buttons a.back-home:hover {
            background-color: #777;
            transform: scale(1.02);
        }
    </style>
</head>
<body>
    <canvas id="marketing-canvas"></canvas>

    <div class="booking-container">
        <h2>Reserva para Asesoría en Marketing</h2>
        <p class="subtitle">Selecciona una fecha y un horario disponibles para tu reunión.</p>

        <div class="booking-section">
            <div class="calendar">
                <div class="calendar-header">
                    <button id="prev-month">&lt;</button>
                    <h3 id="current-month-year"></h3>
                    <button id="next-month">&gt;</button>
                </div>
                <div class="calendar-grid">
                    <div class="day-label">Lun</div>
                    <div class="day-label">Mar</div>
                    <div class="day-label">Mié</div>
                    <div class="day-label">Jue</div>
                    <div class="day-label">Vie</div>
                    <div class="day-label">Sáb</div>
                    <div class="day-label">Dom</div>
                </div>
            </div>

            <div id="time-slots" class="time-slots">
                </div>
        </div>

        <form id="user-form">
            <div class="form-group">
                <label for="name">Nombre y Apellido:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="whatsapp">Número de WhatsApp:</label>
                <input type="tel" id="whatsapp" name="whatsapp" required>
            </div>
            <div class="form-group">
                <label for="email">Correo Electrónico:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-buttons">
                <button type="submit" class="submit">Enviar</button>
                <button type="button" class="clear">Borrar Datos</button>
                <a href="#" class="back-home">Regresar a Inicio</a>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Script de la Animación de Fondo con Canvas ---
            const canvas = document.getElementById('marketing-canvas');
            const ctx = canvas.getContext('2d');
            let items = []; // Aquí guardaremos los objetos (gráficos, bombillas, etc.)

            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();

            // Objeto de la animación: elementos de marketing
            class MarketingItem {
                constructor(type) {
                    this.type = type; // 'graph', 'bulb' o 'target'
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.size = type === 'graph' ? Math.random() * 20 + 15 : Math.random() * 8 + 5;
                    this.speedX = type === 'graph' ? Math.random() * 0.5 - 0.25 : Math.random() * 0.8 - 0.4;
                    this.speedY = type === 'graph' ? Math.random() * 0.5 - 0.25 : Math.random() * 0.8 - 0.4;
                    this.color = type === 'graph' ? '#ffcc00' : type === 'bulb' ? '#ff00d4' : '#00ffc8';
                    this.text = type === 'graph' ? '📈' : type === 'bulb' ? '💡' : '🎯';
                }
                update() {
                    this.x += this.speedX;
                    this.y += this.speedY;

                    // Rebotar en los bordes
                    if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
                    if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
                }
                draw() {
                    ctx.font = `${this.size}px monospace`;
                    ctx.fillStyle = this.color;
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(this.text, this.x, this.y);
                }
            }

            // Inicializar objetos
            function init() {
                items = [];
                for (let i = 0; i < 15; i++) {
                    items.push(new MarketingItem('graph'));
                }
                for (let i = 0; i < 20; i++) {
                    items.push(new MarketingItem('bulb'));
                }
                for (let i = 0; i < 20; i++) {
                    items.push(new MarketingItem('target'));
                }
            }

            // Bucle de animación
            function animate() {
                requestAnimationFrame(animate);
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                for (let i = 0; i < items.length; i++) {
                    items[i].update();
                    items[i].draw();
                }
            }

            init();
            animate();

            // --- Script del Calendario y Formulario (sin cambios) ---
            const calendarGrid = document.querySelector('.calendar-grid');
            const currentMonthYear = document.getElementById('current-month-year');
            const prevMonthBtn = document.getElementById('prev-month');
            const nextMonthBtn = document.getElementById('next-month');
            const timeSlotsContainer = document.getElementById('time-slots');
            const userForm = document.getElementById('user-form');
            const clearDataBtn = document.querySelector('.clear');
            const backHomeBtn = document.querySelector('.back-home');

            let selectedDate = null;
            let selectedTime = null;
            let currentDate = new Date();
            const today = new Date();

            const timeRanges = [
                "10:00 - 11:00", "11:00 - 12:00", "12:00 - 13:00",
                "13:00 - 14:00", "14:00 - 15:00", "15:00 - 16:00",
                "16:00 - 17:00", "17:00 - 18:00"
            ];

            function renderCalendar() {
                calendarGrid.innerHTML = `
                    <div class="day-label">Lun</div>
                    <div class="day-label">Mar</div>
                    <div class="day-label">Mié</div>
                    <div class="day-label">Jue</div>
                    <div class="day-label">Vie</div>
                    <div class="day-label">Sáb</div>
                    <div class="day-label">Dom</div>
                `;
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();
                const monthName = currentDate.toLocaleString('es-ES', { month: 'long' });
                currentMonthYear.textContent = `${monthName.charAt(0).toUpperCase() + monthName.slice(1)} ${year}`;

                const firstDayOfMonth = new Date(year, month, 1);
                let firstDayIndex = firstDayOfMonth.getDay();
                firstDayIndex = firstDayIndex === 0 ? 6 : firstDayIndex - 1;

                for (let i = 0; i < firstDayIndex; i++) {
                    const emptyCell = document.createElement('div');
                    calendarGrid.appendChild(emptyCell);
                }

                const daysInMonth = new Date(year, month + 1, 0).getDate();
                for (let i = 1; i <= daysInMonth; i++) {
                    const dayCell = document.createElement('div');
                    dayCell.classList.add('day-cell');
                    dayCell.textContent = i;
                    dayCell.dataset.date = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
                    
                    const cellDate = new Date(year, month, i);
                    if (cellDate < today && cellDate.toDateString() !== today.toDateString()) {
                        dayCell.classList.add('disabled');
                    } else {
                        dayCell.addEventListener('click', handleDateClick);
                    }
                    calendarGrid.appendChild(dayCell);
                }
                
                if (selectedDate) {
                    const selectedCell = document.querySelector(`.day-cell[data-date="${selectedDate}"]`);
                    if (selectedCell) {
                        selectedCell.classList.add('selected');
                    }
                }
            }

            function handleDateClick(event) {
                document.querySelectorAll('.day-cell').forEach(cell => cell.classList.remove('selected'));
                event.target.classList.add('selected');
                selectedDate = event.target.dataset.date;
                renderTimeSlots();
                selectedTime = null;
                userForm.style.display = 'none';
            }

            function renderTimeSlots() {
                timeSlotsContainer.innerHTML = '';
                timeSlotsContainer.style.display = 'flex';
                timeRanges.forEach(time => {
                    const timeSlot = document.createElement('div');
                    timeSlot.classList.add('time-slot');
                    timeSlot.textContent = time;
                    timeSlot.dataset.time = time;
                    timeSlot.addEventListener('click', handleTimeClick);
                    timeSlotsContainer.appendChild(timeSlot);
                });
            }

            function handleTimeClick(event) {
                document.querySelectorAll('.time-slot').forEach(slot => slot.classList.remove('selected'));
                event.target.classList.add('selected');
                selectedTime = event.target.dataset.time;
                userForm.style.display = 'block';
                userForm.scrollIntoView({ behavior: 'smooth' });
            }

            userForm.addEventListener('submit', (event) => {
                event.preventDefault();
                if (!selectedDate || !selectedTime) {
                    alert('Por favor, selecciona una fecha y hora antes de enviar.');
                    return;
                }
                
                const formData = new FormData(userForm);
                const data = {
                    fecha: selectedDate,
                    hora: selectedTime,
                    nombre: formData.get('name'),
                    whatsapp: formData.get('whatsapp'),
                    email: formData.get('email')
                };
                
                console.log('Datos de la reserva:', data);
                alert(`Reserva confirmada para el ${data.fecha} a las ${data.hora}. Nos pondremos en contacto contigo.`);
                
                userForm.reset();
                selectedDate = null;
                selectedTime = null;
                userForm.style.display = 'none';
                timeSlotsContainer.style.display = 'none';
                renderCalendar();
            });

            clearDataBtn.addEventListener('click', () => {
                userForm.reset();
            });

            backHomeBtn.addEventListener('click', (e) => {
                e.preventDefault();
                window.history.back();
            });

            prevMonthBtn.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar();
            });

            nextMonthBtn.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar();
            });

            renderCalendar();
        });
    </script>
</body>
</html>