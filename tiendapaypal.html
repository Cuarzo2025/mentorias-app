<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda Exclusiva de Recursos - Kit Emprendedor</title>
    
    <script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_CLIENT_ID&currency=USD&enable-funding=visa,mastercard,amex,paylater,discover,jcb"></script>
    
    <style>
        /* Estilos Generales y Colores */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #000; /* Fondo negro */
            color: #ccc; /* Texto gris claro */
            transition: all 0.3s ease;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 40px auto;
            padding: 20px;
            background-color: #1a1a1a; /* Fondo oscuro del contenedor */
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.1); /* Sombra gris sutil */
        }

        h1 {
            color: #A9A9A9; /* T√≠tulo color dorado/gris claro */
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
        }

        /* Contenedor del selector de moneda */
        .currency-selector-container {
            text-align: right;
            margin-bottom: 30px;
            padding: 10px;
            background-color: #333;
            border-radius: 5px;
        }

        .currency-selector-container label {
            font-size: 1.1em;
            margin-right: 10px;
            color: #fff;
        }

        .currency-selector-container select {
            padding: 8px 15px;
            border-radius: 5px;
            border: 1px solid #A9A9A9;
            background-color: #222;
            color: #fff;
            font-size: 1em;
            cursor: pointer;
        }
        
        /* Grid de Productos */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .product-card {
            background-color: #222;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
            border: 1px solid #333;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(255, 255, 255, 0.2);
        }

        .product-card h3 {
            color: #A9A9A9;
            margin-top: 10px;
            font-size: 1.5em;
        }

        .product-card p {
            font-size: 0.9em;
            color: #999;
            min-height: 40px;
        }

        .price {
            font-size: 1.8em;
            font-weight: bold;
            color: #fff;
            margin: 15px 0;
        }
        
        /* Botones de Selecci√≥n */
        .variant-button {
            background-color: #A9A9A9;
            color: #000;
            border: none;
            padding: 12px 20px;
            margin: 10px auto;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            font-size: 1.1em;
            font-weight: bold;
            display: flex; 
            align-items: center; 
            justify-content: center; 
            width: 90%; 
        }

        .variant-button:hover {
            background-color: #fff; 
            color: #000;
        }
        
        .variant-button.selected {
            background-color: #FFC439; 
            color: #111;
            box-shadow: 0 0 10px #FFC439;
        }

        /* Estilo del texto de PayPal dentro del bot√≥n */
        .variant-button .paypal-text {
            color: #003087; 
            font-weight: 800;
            margin-left: 5px;
        }

        /* Contenedor Flotante de Compra */
        #floating-cart {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px;
            background-color: #222;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.4);
            z-index: 1000;
            display: none; /* Oculto por defecto */
            border: 2px solid #A9A9A9;
        }

        #floating-cart h3 {
            color: #A9A9A9;
            margin-top: 0;
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
            margin-bottom: 10px;
        }

        #floating-cart p {
            margin: 5px 0;
            color: #ccc;
        }

        #floating-cart strong {
            color: #fff;
        }

        /* Estilo para el contenedor de PayPal dentro del flotante */
        #paypal-button-container {
            margin-top: 15px;
            display: flex;
            flex-direction: column; /* Apilarlos por defecto */
            gap: 10px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Selecciona la Versi√≥n de Tu Kit de Emprendimiento</h1>

        <div class="currency-selector-container">
            <label for="currency-select">Seleccionar Moneda:</label>
            <select id="currency-select" onchange="updateCurrencyDisplay()">
                <option value="USD" selected>D√≥lar Estadounidense (USD - $)</option>
                <option value="EUR">Euro (EUR - ‚Ç¨)</option>
                <option value="CHF">Franco Suizo (CHF - Fr.)</option>
                <option value="GBP">Libra Esterlina (GBP - ¬£)</option>
            </select>
        </div>
        <div class="product-grid">

            <div class="product-card">
                <h3>Kit Digital B√°sico</h3>
                <p>Acceso a la gu√≠a principal y plantillas esenciales. Ideal para principiantes.</p>
                <div class="price" data-usd-price="19.99">$19.99 USD</div> 
                <button 
                    class="variant-button" 
                    data-id="1" 
                    data-title="Kit Digital B√°sico" 
                    data-price="19.99"
                    onclick="selectProduct(this)">
                    Comprar Ahora 
                    <span class="paypal-text">| PayPal</span>
                </button>
            </div>

            <div class="product-card">
                <h3>Kit Digital Premium</h3>
                <p>Incluye gu√≠a avanzada, 1 hora de consultor√≠a y recursos exclusivos. ¬°El m√°s popular!</p>
                <div class="price" data-usd-price="49.99">$49.99 USD</div>
                <button 
                    class="variant-button" 
                    data-id="2" 
                    data-title="Kit Digital Premium" 
                    data-price="49.99"
                    onclick="selectProduct(this)">
                    Comprar Ahora 
                    <span class="paypal-text">| PayPal</span>
                </button>
            </div>

            <div class="product-card">
                <h3>Kit Mentor Master</h3>
                <p>Todo lo anterior m√°s un mes de soporte ilimitado y plan de negocio personalizado.</p>
                <div class="price" data-usd-price="99.99">$99.99 USD</div>
                <button 
                    class="variant-button" 
                    data-id="3" 
                    data-title="Kit Mentor Master" 
                    data-price="99.99"
                    onclick="selectProduct(this)">
                    Comprar Ahora 
                    <span class="paypal-text">| PayPal</span>
                </button>
            </div>

        </div>
    </div>
    
    <div style="text-align: center; margin-top: 40px; margin-bottom: 50px;">
        <button 
            id="pay-card-button"
            onclick="showFloatingCartForSelectedProduct()"
            style="
                background-color: #B22222; /* Rojo llamativo */
                color: white;
                border: none;
                padding: 15px 30px;
                border-radius: 8px;
                cursor: pointer;
                font-size: 1.2em;
                font-weight: bold;
                transition: background-color 0.2s;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
                display: none; /* Inicialmente oculto */
            ">
            PAGAR CON TARJETA (VISA, MASTER CARD, AMEX) üí≥
        </button>
        <p id="selection-hint" style="color: #999;">
            *Por favor, selecciona un kit para habilitar el pago.*
        </p>
    </div>
    <div id="floating-cart">
        <h3>Tu Compra R√°pida</h3>
        <p>Producto: <strong id="cart-title">Ninguno</strong></p>
        <p>Total: <strong id="cart-price">$0.00 USD</strong></p> 
        
        <div id="paypal-button-container"></div>
        
        <p style="font-size: 0.8em; text-align: center; color: #888; margin-top: 10px;">
            El pago es 100% seguro y gestionado por PayPal.
        </p>
    </div>

    <footer>
        <div style="background-color: #111; color: #666; padding: 15px; text-align: center; margin-top: 20px;">
             &copy; 2025 **H√©ctor Mauricio Raposso**. Todos los derechos reservados.
        </div>
    </footer>
    <script>
        let selectedProduct = null;
        let currentCurrency = 'USD'; // Moneda inicial
        
        // ** Tasa de Conversi√≥n Fija para el ejemplo (USD por la otra moneda) **
        const conversionRate = {
            'USD': 1.00,
            'EUR': 0.9259,
            'CHF': 0.8876,
            'GBP': 0.8123 
        };
        const currencySymbols = {
            'USD': '$',
            'EUR': '‚Ç¨',
            'CHF': 'Fr.',
            'GBP': '¬£'
        };

        const floatingCart = document.getElementById('floating-cart');
        const cartTitle = document.getElementById('cart-title');
        const cartPrice = document.getElementById('cart-price');
        const currencySelect = document.getElementById('currency-select');
        const payCardButton = document.getElementById('pay-card-button');
        const selectionHint = document.getElementById('selection-hint');
        
        /**
         * Convierte el precio base (USD) a la moneda seleccionada.
         */
        function convertPrice(usdPrice) {
            return usdPrice * conversionRate[currentCurrency];
        }

        /**
         * Formatea el precio con el s√≠mbolo y c√≥digo de moneda actual.
         */
        function formatPrice(price) {
            const symbol = currencySymbols[currentCurrency];
            return `${symbol}${price.toFixed(2)} ${currentCurrency}`;
        }
        
        /**
         * Actualiza la visualizaci√≥n de todos los precios en la p√°gina.
         */
        function updateCurrencyDisplay() {
            currentCurrency = currencySelect.value;
            const priceElements = document.querySelectorAll('.price');
            
            priceElements.forEach(el => {
                const usdPrice = parseFloat(el.getAttribute('data-usd-price'));
                const newPrice = convertPrice(usdPrice);
                el.textContent = formatPrice(newPrice);
            });
            
            if (selectedProduct) {
                const newPrice = convertPrice(selectedProduct.basePrice); 
                selectedProduct.currentPrice = newPrice;
                
                cartPrice.textContent = formatPrice(newPrice);
                // Si el carrito estaba abierto, lo actualiza. Si no, no lo fuerza a aparecer.
                if (floatingCart.style.display !== 'none') {
                    initPayPalButtons(selectedProduct.id, selectedProduct.currentPrice, selectedProduct.title, currentCurrency);
                }
            }
        }
        
        function selectProduct(buttonElement) {
            const id = buttonElement.getAttribute('data-id');
            const title = buttonElement.getAttribute('data-title');
            const basePrice = parseFloat(buttonElement.getAttribute('data-price')); 
            
            const currentPrice = convertPrice(basePrice);

            selectedProduct = { id, title, basePrice, currentPrice };

            document.querySelectorAll('.variant-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            buttonElement.classList.add('selected');
            
            cartTitle.textContent = title;
            cartPrice.textContent = formatPrice(currentPrice);
            
            // Oculta el carrito flotante inmediatamente despu√©s de la selecci√≥n
            floatingCart.style.display = 'none';

            // Muestra el nuevo bot√≥n de pagar con tarjeta
            payCardButton.style.display = 'block';
            selectionHint.style.display = 'none';

            initPayPalButtons(id, currentPrice, title, currentCurrency);
        }

        // FUNCI√ìN A√ëADIDA para el bot√≥n grande de pagar con tarjeta
        function showFloatingCartForSelectedProduct() {
            if (selectedProduct) {
                // Muestra el carrito flotante
                floatingCart.style.display = 'block';
                // Hace un scroll suave hacia el carrito flotante
                floatingCart.scrollIntoView({ behavior: 'smooth', block: 'center' });
            } else {
                alert('Por favor, selecciona primero un Kit antes de ir a pagar.');
            }
        }

        /**
         * Inicializa los Smart Buttons de PayPal, renderizando PayPal, Visa y Mastercard individualmente.
         */
        function initPayPalButtons(id, price, title, currency) {
            const paypalContainer = document.getElementById('paypal-button-container');
            if (paypalContainer) {
                paypalContainer.innerHTML = ''; // Limpia el contenedor
            }
            
            if (typeof paypal === 'undefined') {
                console.error("PayPal SDK no cargado. Revisa tu Client ID.");
                return;
            }

            // Configuraci√≥n base para todos los botones
            const baseConfig = {
                style: {
                    layout: 'vertical',
                    shape: 'rect',
                    height: 45 // Necesario para la correcta visualizaci√≥n
                },
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: price.toFixed(2), 
                                currency_code: currency 
                            },
                            description: `Compra: ${title} (ID: ${id})`
                        }]
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        const finalAmount = details.purchase_units[0].amount.value;
                        const finalCurrency = details.purchase_units[0].amount.currency_code;
                        alert(`¬°Pago de ${finalAmount} ${finalCurrency} completado para "${title}"!\n\nID de Transacci√≥n: ${details.id}`);
                        
                        // Limpieza post-compra
                        floatingCart.style.display = 'none';
                        payCardButton.style.display = 'none';
                        selectionHint.style.display = 'block';

                        document.querySelectorAll('.variant-button').forEach(btn => {
                            btn.classList.remove('selected');
                        });
                        selectedProduct = null;
                    });
                },
                onError: function(err) {
                    console.error('Error de PayPal:', err);
                    alert('Hubo un error con el pago. Por favor, int√©ntalo de nuevo.');
                }
            };
            
            // --- Renderizado de Botones Individuales ---
            // 1. Bot√≥n Principal de PayPal (Gold)
            if (paypal.FUNDING.PAYPAL.eligible) {
                paypal.Buttons({
                    ...baseConfig,
                    fundingSource: paypal.FUNDING.PAYPAL,
                    style: {...baseConfig.style, color: 'gold', label: 'paypal'}
                }).render('#paypal-button-container');
            }

            // 2. Bot√≥n de VISA (Aparece como "Debit or Credit Card")
            if (paypal.FUNDING.VISA && paypal.FUNDING.VISA.eligible) {
                paypal.Buttons({
                    ...baseConfig,
                    fundingSource: paypal.FUNDING.VISA,
                    style: {...baseConfig.style, color: 'white', label: 'pay'}
                }).render('#paypal-button-container');
            }

            // 3. Bot√≥n de MASTERCARD
            if (paypal.FUNDING.MASTERCARD && paypal.FUNDING.MASTERCARD.eligible) {
                paypal.Buttons({
                    ...baseConfig,
                    fundingSource: paypal.FUNDING.MASTERCARD,
                    style: {...baseConfig.style, color: 'white', label: 'pay'}
                }).render('#paypal-button-container');
            }
            
            // 4. Bot√≥n Pay Later (Financiamiento)
            if (paypal.FUNDING.PAYLATER && paypal.FUNDING.PAYLATER.eligible) {
                 paypal.Buttons({
                    ...baseConfig,
                    fundingSource: paypal.FUNDING.PAYLATER,
                    style: {...baseConfig.style, color: 'blue', label: 'pay'}
                }).render('#paypal-button-container');
            }
            
            // Amex a menudo se agrupa con Visa/Mastercard y no necesita un renderizado expl√≠cito
        }

        // Inicializa la vista de moneda al cargar la p√°gina
        document.addEventListener('DOMContentLoaded', () => {
             updateCurrencyDisplay();
             // Asegura que el bot√≥n de pagar est√© oculto al inicio
             payCardButton.style.display = 'none';
             selectionHint.style.display = 'block';
        });
    </script>
</body>
</html>